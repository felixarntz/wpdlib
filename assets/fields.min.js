jQuery(document).ready(function(a){function b(b){var c=a(b.element);return c.data().hasOwnProperty("image")?'<div class="wpdlib-option-box" style="background-image:url('+c.data("image")+');"></div>'+b.text:c.data().hasOwnProperty("color")?'<div class="wpdlib-option-box" style="background-color:#'+c.data("color")+';"></div>'+b.text:b.text}if("undefined"!=typeof a.fn.select2){var c={containerCss:{width:"100%","max-width":"500px"},closeOnSelect:!1,formatResult:b,formatSelection:b,escapeMarkup:function(a){return a},minimumResultsForSearch:8};a(".wpdlib-input-select").select2(c)}if("undefined"!=typeof a.fn.datetimepicker){var d={lang:_wpdlib_data.language,formatDate:"Y-m-d",formatTime:"H:i",dayOfWeekStart:_wpdlib_data.start_of_week},e=a.extend({format:_wpdlib_data.date_format+" "+_wpdlib_data.time_format,onShow:function(a,b){var c="";b.attr("min")&&(c=b.attr("min").split(" "),2===c.length?this.setOptions({minDate:c[0],minTime:c[1]}):1===c.length&&this.setOptions({minDate:c[0]})),b.attr("max")&&(c=b.attr("max").split(" "),2===c.length?this.setOptions({maxDate:c[0],maxTime:c[1]}):1===c.length&&this.setOptions({maxDate:c[0]})),b.attr("step")&&this.setOptions({step:parseInt(b.attr("step"))})}},d),f=a.extend({format:_wpdlib_data.date_format,timepicker:!1,onShow:function(a,b){b.attr("min")&&this.setOptions({minDate:b.attr("min")}),b.attr("max")&&this.setOptions({maxDate:b.attr("max")})}},d),g=a.extend({format:_wpdlib_data.time_format,datepicker:!1,onShow:function(a,b){b.attr("min")&&this.setOptions({minTime:b.attr("min")}),b.attr("max")&&this.setOptions({maxTime:b.attr("max")}),b.attr("step")&&this.setOptions({step:parseInt(b.attr("step"))})}},d);a(".wpdlib-input-datetime").datetimepicker(e),a(".wpdlib-input-date").datetimepicker(f),a(".wpdlib-input-time").datetimepicker(g)}if(a(document).on("change",".wpdlib-input-range, .wpdlib-input-color",function(){a(this).prev("input").val(a(this).val())}),a(document).on("change",".wpdlib-input-range-viewer, .wpdlib-input-color-viewer",function(){a(this).next("input").val(a(this).val())}),a(document).on("click",".wpdlib-input-radio .wpdlib-radio div",function(){var b=a(this).attr("id").replace("-asset","");a("#"+b).prop("checked",!0).trigger("change")}),a(document).on("change",".wpdlib-input-radio .wpdlib-radio input",function(){var b=a(this).attr("id");a(this).parent().parent().find(".wpdlib-radio div").removeClass("checked"),a("#"+b).addClass("checked")}),a(document).on("click",".wpdlib-input-multibox .wpdlib-checkbox div",function(){var b=a(this).attr("id").replace("-asset","");a(this).hasClass("checked")?(a(this).removeClass("checked"),a("#"+b).prop("checked",!1)):(a(this).addClass("checked"),a("#"+b).prop("checked",!0))}),"undefined"!=typeof wp.media){var h=!0,i=wp.media.editor.send.attachment;a(document).on("click",".wpdlib-media-button",function(){var b=a(this),c=b.attr("id").replace("-media-button","");return h=!0,wp.media.editor.send.attachment=function(b,d){if(!h)return i.apply(this,[b,d]);a("#"+c).val(d.id);var e=d.url.split("/");e=e[e.length-1],a("#"+c+"-media-title").val(e),"image"===d.type?a("#"+c+"-media-image").length>0?a("#"+c+"-media-image").attr("src",d.url):a("#"+c+"-media-button").after('<img id="'+c+'-media-image" class="wpdlib-media-image" src="'+d.url+'" />'):a("#"+c+"-media-link").length>0?a("#"+c+"-media-link").attr("href",d.url):a("#"+c+"-media-button").after('<a id="'+c+'-media-link" class="wpdlib-media-link" href="'+d.url+'" target="_blank">'+_wpdlib_data.i18n_open_file+"</a>")},wp.media.editor.open(b),!1}),a(".add_media").on("click",function(){h=!1})}a(".wpdlib-input-repeatable").length>0&&void 0!==_wpdlib_data&&a(".wpdlib-input-repeatable").each(function(){a(this).on("click",".wpdlib-new-repeatable-button",function(b){var d=a("#"+b.delegateTarget.id),h=parseInt(d.data("limit")),i=d.attr("id"),j=d.find(".wpdlib-repeatable-row").length;if("undefined"!=typeof _wpdlib_data.repeatable_field_templates[i]){var k=_wpdlib_data.repeatable_field_templates[i].replace(/{{KEY}}/g,j).replace(/{{KEY_PLUSONE}}/g,j+1);d.find(".wpdlib-repeatable-table").show(),d.find(".wpdlib-repeatable-table").append(k),"undefined"!=typeof a.fn.select2&&d.find(".wpdlib-input-select").select2(c),"undefined"!=typeof a.fn.datetimepicker&&(d.find(".wpdlib-input-datetime").datetimepicker(e),d.find(".wpdlib-input-date").datetimepicker(f),d.find(".wpdlib-input-time").datetimepicker(g)),h>0&&h===j+1&&d.find(".wpdlib-new-repeatable-button").hide()}b.preventDefault()}),a(this).on("click",".wpdlib-remove-repeatable-button",function(b){var c=a("#"+b.delegateTarget.id),d=c.find(".wpdlib-repeatable-row"),e=parseInt(a(this).data("number"))+1;b.preventDefault(),d.filter(":nth-child("+(e+1)+")").remove(),d.filter(":gt("+(e-1)+")").each(function(){var b=a(this),c=parseInt(b.find(".wpdlib-remove-repeatable-button").data("number")),d=c-1;b.find("span:first").html(b.find("span:first").html().replace((c+1).toString(),(d+1).toString())),b.find(".wpdlib-repeatable-col input, .wpdlib-repeatable-col select, .wpdlib-repeatable-col img, .wpdlib-repeatable-col a").each(function(){a(this).attr("id")&&a(this).attr("id",a(this).attr("id").replace(c.toString(),d.toString())),a(this).attr("name")&&a(this).attr("name",a(this).attr("name").replace(c.toString(),d.toString()))}),b.find(".wpdlib-remove-repeatable-button").data("number",d.toString())});var f=parseInt(a("#"+b.delegateTarget.id).data("limit"));f>0&&f>a("#"+b.delegateTarget.id).find(".wpdlib-repeatable-row").length&&a("#"+b.delegateTarget.id).find(".wpdlib-new-repeatable-button").show(),a("#"+b.delegateTarget.id).find(".wpdlib-repeatable-row").length<1&&a("#"+b.delegateTarget.id).find(".wpdlib-repeatable-table").hide()})})});