!function(a){"undefined"==typeof _wpdlib_data&&console.error("WPDLib data object not found");var b={args:_wpdlib_data,select2_enabled:"undefined"!=typeof a.fn.select2,select2_args:{},datetimepicker_enabled:"undefined"!=typeof a.fn.datetimepicker,datetimepicker_args:{},colorpicker_enabled:"undefined"!=typeof a.fn.wpColorPicker,colorpicker_args:{},mediapicker_enabled:"undefined"!=typeof a.fn.wpMediaPicker,mediapicker_args:{},init:function(){var a=b;a.select2_args={containerCss:{width:"100%","max-width":"500px"},closeOnSelect:!1,formatResult:a._formatSelect2,formatSelection:a._formatSelect2,escapeMarkup:function(a){return a},minimumResultsForSearch:8},a.datetimepicker_args={lang:a.args.language,formatDate:"Y-m-d",formatTime:"H:i",dayOfWeekStart:a.args.start_of_week},a.colorpicker_args={mode:"hsv"},a.mediapicker_args={store:"id",filterable:!1,label_add:a.args.media_i18n_add,label_replace:a.args.media_i18n_replace,label_remove:a.args.media_i18n_remove,label_modal:a.args.media_i18n_modal,label_button:a.args.media_i18n_button},a._initJQueryPluginFields(),a._setupRange(".wpdlib-input-range"),a._setupRadio(".wpdlib-input-radio"),a._setupMultibox(".wpdlib-input-multibox"),a._setupRepeatable(".wpdlib-input-repeatable")},_initJQueryPluginFields:function(a){var c=b;"string"!=typeof a?a="":a+=" ",c._setupSelect2(a+".wpdlib-input-select"),c._setupDatetimepicker(a+".wpdlib-input-datetime"),c._setupDatepicker(a+".wpdlib-input-date"),c._setupTimepicker(a+".wpdlib-input-time"),c._setupColorpicker(a+".wpdlib-input-color"),c._setupMediapicker(a+".wpdlib-input-media")},_setupSelect2:function(a){if(this.select2_enabled){var b=this._getJQuery(a);b.select2(this.select2_args)}},_setupDatetimepicker:function(b){if(this.datetimepicker_enabled){var c=this._getJQuery(b);c.datetimepicker(a.extend({format:this.args.date_format+" "+this.args.time_format,onShow:this._datetimeOnShow},this.datetimepicker_args))}},_setupDatepicker:function(b){if(this.datetimepicker_enabled){var c=this._getJQuery(b);c.datetimepicker(a.extend({format:this.args.date_format,timepicker:!1,onShow:this._dateOnShow},this.datetimepicker_args))}},_setupTimepicker:function(b){if(this.datetimepicker_enabled){var c=this._getJQuery(b);c.datetimepicker(a.extend({format:this.args.time_format,datepicker:!1,onShow:this._timeOnShow},this.datetimepicker_args))}},_setupColorpicker:function(a){if(this.colorpicker_enabled){var b=this._getJQuery(a);b.wpColorPicker(this.colorpicker_args)}},_setupMediapicker:function(a){if(this.mediapicker_enabled){var b=this._getJQuery(a);b.wpMediaPicker(this.mediapicker_args)}},_setupRange:function(b){a(document).on("change",b,function(){a(this).prev("input").val(a(this).val())}),a(document).on("change",b+"-viewer",function(){a(this).next("input").val(a(this).val())})},_setupRadio:function(b){a(document).on("click",b+" .wpdlib-radio div",function(){var b=a(this).attr("id").replace("-asset","");a("#"+b).prop("checked",!0).trigger("change")}),a(document).on("change",b+" .wpdlib-radio input",function(){var b=a(this).attr("id");a(this).parent().parent().find(".wpdlib-radio div").removeClass("checked"),a("#"+b).addClass("checked")})},_setupMultibox:function(b){a(document).on("click",b+" .wpdlib-checkbox div",function(){var b=a(this).attr("id").replace("-asset","");a(this).hasClass("checked")?(a(this).removeClass("checked"),a("#"+b).prop("checked",!1)):(a(this).addClass("checked"),a("#"+b).prop("checked",!0))})},_setupRepeatable:function(c){var d=b,e=this._getJQuery(c);e.each(function(){a(this).on("click",".wpdlib-new-repeatable-button",function(b){var c="#"+b.delegateTarget.id,e=a(c),f=parseInt(e.data("limit")),g=e.attr("id"),h=e.find(".wpdlib-repeatable-row").length;if("undefined"!=typeof d.args.repeatable_field_templates[g]){var i=d.args.repeatable_field_templates[g].replace(/{{KEY}}/g,h).replace(/{{KEY_PLUSONE}}/g,h+1);e.find(".wpdlib-repeatable-table").show(),e.find(".wpdlib-repeatable-table").append(i),f>0&&f===h+1&&e.find(".wpdlib-new-repeatable-button").hide(),a(document).trigger("wpdlib-added-repeatable-item",[c])}b.preventDefault()}),a(this).on("click",".wpdlib-remove-repeatable-button",function(b){var c=a("#"+b.delegateTarget.id),d=c.find(".wpdlib-repeatable-row"),e=parseInt(a(this).data("number"))+1;b.preventDefault(),d.filter(":nth-child("+(e+1)+")").remove(),d.filter(":gt("+(e-1)+")").each(function(){var b=a(this),c=parseInt(b.find(".wpdlib-remove-repeatable-button").data("number")),d=c-1;b.find("span:first").html(b.find("span:first").html().replace((c+1).toString(),(d+1).toString())),b.find(".wpdlib-repeatable-col input, .wpdlib-repeatable-col select, .wpdlib-repeatable-col img, .wpdlib-repeatable-col a").each(function(){a(this).attr("id")&&a(this).attr("id",a(this).attr("id").replace(c.toString(),d.toString())),a(this).attr("name")&&a(this).attr("name",a(this).attr("name").replace(c.toString(),d.toString()))}),b.find(".wpdlib-remove-repeatable-button").data("number",d.toString())});var f=parseInt(c.data("limit"));f>0&&f>c.find(".wpdlib-repeatable-row").length&&c.find(".wpdlib-new-repeatable-button").show(),c.find(".wpdlib-repeatable-row").length<1&&c.find(".wpdlib-repeatable-table").hide()})}),a(document).on("wpdlib-added-repeatable-item",function(a,b){d._initJQueryPluginFields(b)})},_getJQuery:function(b){return"string"==typeof b?a(b):b},_formatSelect2:function(b){var c=a(b.element);return c.data().hasOwnProperty("image")?'<div class="wpdlib-option-box" style="background-image:url('+c.data("image")+');"></div>'+b.text:c.data().hasOwnProperty("color")?'<div class="wpdlib-option-box" style="background-color:#'+c.data("color")+';"></div>'+b.text:b.text},_datetimeOnShow:function(a,b){var c="";b.attr("min")&&(c=b.attr("min").split(" "),2===c.length?this.setOptions({minDate:c[0],minTime:c[1]}):1===c.length&&this.setOptions({minDate:c[0]})),b.attr("max")&&(c=b.attr("max").split(" "),2===c.length?this.setOptions({maxDate:c[0],maxTime:c[1]}):1===c.length&&this.setOptions({maxDate:c[0]})),b.attr("step")&&this.setOptions({step:parseInt(b.attr("step"))})},_dateOnShow:function(a,b){b.attr("min")&&this.setOptions({minDate:b.attr("min")}),b.attr("max")&&this.setOptions({maxDate:b.attr("max")})},_timeOnShow:function(a,b){b.attr("min")&&this.setOptions({minTime:b.attr("min")}),b.attr("max")&&this.setOptions({maxTime:b.attr("max")}),b.attr("step")&&this.setOptions({step:parseInt(b.attr("step"))})}};a(document).ready(function(){b.init()})}(jQuery);